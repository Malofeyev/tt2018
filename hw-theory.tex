\documentclass[10pt,a4paper,oneside]{article}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{enumerate}
\usepackage{stmaryrd}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm,bindingoffset=0cm]{geometry}
\usepackage{proof}
\newcommand{\gq}[1]{\texttt{<<}#1\texttt{>>}}
\newcommand{\ogq}[1]{\overline{\texttt{<<}#1\texttt{>>}}}
\begin{document}

\begin{center}{\Large\textsc{\textbf{Теоретические (``малые'') домашние задания}}}\\
             \it Теория типов, ИТМО, М3334-М3339, осень 2018 года\end{center}

\section*{Домашнее задание №1: <<знакомство с лямбда-исчислением>>}

\begin{enumerate}
\item Расставьте скобки:

$\lambda f.\lambda x.f\ x\ \ (\lambda c.g\ f)\ x\ a\ \lambda b.\lambda a.x$

\item Проведите бета-редукции и приведите выражения к нормальной форме:

\begin{enumerate}
\item $(\lambda f.\lambda x.f\ (f\ x))\ (\lambda f.\lambda x.f\ (f\ x))$
\item $(\lambda a.\lambda b.b)\ ((\lambda x.x\ x)\ (\lambda x.x\ x\ x))$
\end{enumerate}

\item Выразите следующие функции в лямбда-исчислении:

\begin{enumerate}
\item Or, Xor
\item isZero (T, если аргумент равен 0, иначе F)
\item isEven (T, если аргумент чётный)
\item умножение на 2, умножение
\item возведение в степень
\item вычитание 1, вычитание
\end{enumerate}
\end{enumerate}

\section*{Домашнее задание №2: <<пропущенные теоремы лямбда-исчисления>>}

Докажите следующие леммы, упомянутые, но недоказанные на лекции:

\begin{enumerate}
\item Если отношение $R$ обладает ромбовидным свойством, то и отношение $R^*$ 
(транзитивное и рефлексивное замыкание $R$) также им обладает.
\item Отношение альфа-эквивалентности является отношением эквивалентности.
\item Если $P_1\rightrightarrows_\beta P_2$ и $Q_1\rightrightarrows_\beta Q_2$, то $P_1[x := Q_1] \rightrightarrows_\beta P_2[x := Q_2]$.
\item $(\rightrightarrows_\beta)$ обладает ромбовидным свойством.
\item $(\rightrightarrows_\beta) \subseteq (\rightarrow_\beta)^*$ 
\item $(\rightarrow_\beta) \subseteq (\rightrightarrows_\beta)$ 
\end{enumerate}

\section*{Домашнее задание №3: <<просто типизированное лямбда-исчисление>>}

\begin{enumerate}
\item Докажите лемму о промежуточных типах (Generation lemma, 3.1.6 из 
Morten Heine B. Sørensen, Pawel Urzyczyn: Lections on the Curry-Howard Isomorphism). 
А именно, покажите, что:
  \begin{enumerate}
  \item $\Gamma \vdash x : \tau$ влечёт $x : \tau \in \Gamma$.
  \item $\Gamma \vdash M N : \sigma$ влечёт существование типа $\tau$, такого, что
    что $\Gamma \vdash M : \tau\rightarrow\sigma$ и $\Gamma \vdash N : \tau$.
  \item $\Gamma \vdash \lambda x.M : \sigma$ влечёт существование типов $\tau$ и $\rho$, таких, что
    $\Gamma, x: \tau \vdash M : \rho$ и $\sigma = \tau\rightarrow\rho$
  \end{enumerate}

\item Докажите лемму о подстановке (Substitution lemma, 3.1.8):
\begin{enumerate}
   \item Обозначим за $\sigma[\alpha:=\tau]$ (за $\Gamma[\alpha:=\tau]$) замену всех элементарных 
   типов $\alpha$ на тип $\tau$ в типе $\sigma$ (во всех типах в $\Gamma$). 
   Тогда, если $\Gamma \vdash M : \sigma$, то $\Gamma[\alpha := \tau] \vdash M : \sigma [\alpha := \tau]$.
   \item Если $\Gamma, x:\tau \vdash M : \sigma$ и $\Gamma \vdash N : \tau$, то $\Gamma \vdash M[x := N]:\sigma$.
\end{enumerate}

\item Докажите лемму о редукции терма (Subject reduction proposition, 3.1.9):
    если $\Gamma\vdash M:\sigma$ и $M \rightarrow_\beta N$, то $\Gamma \vdash N:\sigma$.

\item Пользуясь предыдущими пунктами, покажите, что $Y$ нетипизируем в просто типизированном лямбда-исчислении.

\item Найдите терм $M$ и два различных типа $\sigma$ и $\tau$, что $\vdash M: \sigma$ и $\vdash M:\tau$.
    А существует ли терм $M$, имеющий в точности один тип?

\item Покажите, что лемма о редукции терма не работает <<в обратную сторону>>. А именно, что:
   \begin{enumerate}
   \item Найдутся $M$, $N$ и $\tau$, что $\vdash N:\tau$, $M \rightarrow_\beta N$, но $M$ не имеет типа.
   \item Найдутся $M$, $N$, $\sigma$ и $\tau$, что $\vdash M:\sigma$, $\vdash N:\tau$ и $M \rightarrow_\beta N$, но
     $\nvdash M:\tau$.
   \end{enumerate}
\end{enumerate}
\end{document}
